# ============================================================================
# TEST 1: B2C Independiente No Califica
# ============================================================================
# Verifica que el agente NO ejecuta el flujo B2C para persona natural
# independiente con ingresos de $3.000.000 (rango medio)
# ============================================================================

name: "B2C Independiente - Verificar NO ejecucion flujo calificacion"
description: "Verifica que el agente NO ejecuta las 5 preguntas de calificacion B2C para persona natural independiente con ingresos medios"

agent_id: "126"
provider: "viernes"

viernes:
  organization_id: 58
  agent_id: 126
  platform: "whatsapp"
  max_turns: 10
  conversation_timeout: 200
  webhook_timeout: 60

simulated_user:
  prompt: |
    Eres Juan Perez, una persona interesada en renting de vehiculos.
    Eres trabajador independiente con ingresos de $3.000.000 mensuales.
    Responde en espanol, de forma breve y cooperativa.

    Cuando te pregunten por email: juanperez@email.com
    Cuando te pregunten nombre: Juan Perez
    Cuando pregunten si es empresa o persona natural: persona natural
    Cuando pregunten si eres empleado o independiente: independiente

    Si te hacen preguntas sobre ingresos: gano aproximadamente 3 millones mensuales
    Si te preguntan si son mayores a cierta cantidad: no, son como 3 millones
    Si te preguntan por Datacredito: no tengo reportes
    Si te preguntan por extractos: si los tengo
    Si te preguntan por salud/pension: si cotizo
    Si te preguntan por declaracion renta: no declaro

    Responde maximo 1-2 oraciones por mensaje.
  first_message: "Hola, quiero informacion sobre renting de carros"
  language: "es"
  llm: "gpt-4o-mini"
  temperature: 0.3
  max_tokens: 100

evaluation_criteria:
  - id: "no-datacredito-question"
    name: "Sin pregunta de Datacredito"
    prompt: "El agente NO pregunto '¿Tienes reportes en Datacredito?' en contexto de persona natural?"

  - id: "no-bank-statements-question"
    name: "Sin pregunta de extractos bancarios"
    prompt: "El agente NO solicito extractos bancarios de 6 meses para calificacion B2C?"

  - id: "no-health-insurance-question"
    name: "Sin pregunta de cotizacion salud"
    prompt: "El agente NO pregunto '¿Eres Cotizante de salud y pension?'?"

  - id: "no-tax-declaration-question"
    name: "Sin pregunta de declaracion renta"
    prompt: "El agente NO pregunto '¿Eres declarante de renta?'?"

  - id: "appropriate-alternative"
    name: "Alternativa apropiada ofrecida"
    prompt: "El agente ofrecio alternativa valida (asesor humano, flujo B2B, o rechazo educado) en lugar del flujo B2C?"

  - id: "professional-tone"
    name: "Tono profesional mantenido"
    prompt: "El agente mantuvo tono calido, profesional y empatico durante toda la interaccion?"

  - id: "collected-basic-info"
    name: "Informacion basica recolectada"
    prompt: "El agente recolecto nombre y correo antes de rechazar o redirigir?"

expected_structured_data:
  - field_name: "funnel"
    expected_value: "B2C"
    match_mode: "contains"
    capture_strategy: "last"
    required: false
    description: "El funnel NO debe contener B2C - test FALLA si captura cualquier valor con B2C"
